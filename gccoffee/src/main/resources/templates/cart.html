<!-- ... ìƒëµëœ head ë° styleì€ ì´ì „ ì½”ë“œì™€ ë™ì¼ ... -->

<script>
  const isLoggedIn = false;

  let cart = [
    { name: "Colombia NariÃ±o", price: 5000, quantity: 2, image: "/images/coffee1.png" },
    { name: "Brazil CaparaÃ³", price: 4800, quantity: 1, image: "/images/coffee2.png" }
  ];

  function renderCart() {
    const cartItemsEl = document.getElementById("cart-items");
    const totalEl = document.getElementById("cart-total");
    const guestInfo = document.getElementById("guest-info");

    cartItemsEl.innerHTML = '';
    let total = 0;

    if (cart.length === 0) {
      cartItemsEl.innerHTML = '<p style="text-align:center; margin-top:20px;">ğŸ§º ì¥ë°”êµ¬ë‹ˆê°€ ë¹„ì—ˆìŠµë‹ˆë‹¤.</p>';
      totalEl.innerText = "ì´ ê¸ˆì•¡: 0ì›";
      guestInfo.style.display = "none";
      return;
    }

    cart.forEach((item, index) => {
      const itemTotal = item.price * item.quantity;
      total += itemTotal;

      const div = document.createElement("div");
      div.className = "cart-item";
      div.innerHTML = `
        <img src="${item.image}" alt="${item.name}">
        <div class="cart-info">
          <strong>${item.name}</strong><br>
          <div class="quantity-control">
            <button class="quantity-btn" onclick="changeQuantity(${index}, -1)">â–</button>
            ${item.quantity}
            <button class="quantity-btn" onclick="changeQuantity(${index}, 1)">â•</button>
          </div>
        </div>
        <div>${itemTotal.toLocaleString()}ì›</div>
        <div>
          <button class="quantity-btn" onclick="removeItem(${index})">ğŸ—‘ï¸</button>
        </div>
      `;
      cartItemsEl.appendChild(div);
    });

    totalEl.innerText = `ì´ ê¸ˆì•¡: ${total.toLocaleString()}ì›`;
    guestInfo.style.display = isLoggedIn ? "none" : "block";
  }

  function changeQuantity(index, delta) {
    cart[index].quantity += delta;
    if (cart[index].quantity < 1) cart[index].quantity = 1;
    renderCart();
  }

  function removeItem(index) {
    if (confirm("ì •ë§ ì´ ìƒí’ˆì„ ì‚­ì œí•˜ì‹œê² ì–´ìš”?")) {
      cart.splice(index, 1); // ì¸ë±ìŠ¤ë¡œ ì œê±°
      renderCart();
    }
  }

  function submitOrder() {
    if (!isLoggedIn) {
      const email = document.getElementById("guestEmail").value;
      const address = document.getElementById("guestAddress").value;
      const postCode = document.getElementById("guestPostCode").value;
      if (!email || !address || !postCode) {
        alert("ë¹„íšŒì›ì€ ì´ë©”ì¼, ì£¼ì†Œ, ìš°í¸ë²ˆí˜¸ë¥¼ ëª¨ë‘ ì…ë ¥í•´ì•¼ í•©ë‹ˆë‹¤.");
        return;
      }
    }
    alert("ì£¼ë¬¸ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.");
  }

  renderCart();
</script>